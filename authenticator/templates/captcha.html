{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Captcha</title>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.validate.min.js' %}"></script>
    <script src="{% static 'js/additional-methods.min.js' %}"></script>
    <script src="{% static 'js/jquery.validate.extend.js' %}"></script>
    <script src="{% static 'js/jquery.validate.messages_cn.js' %}" charset="UTF-8"></script>
</head>
<body>
    {{ form.captcha }}
    <span id="submit123">提交按钮</span>

<script>
    $('.captcha').click(function () {

        $.get("get_new_captcha?newsn=1", function (result) {
            $('.captcha').attr('src', result);
            $('#id_captcha_0').attr("value", result.split('/')[3]);
        });

        return false;
    });

    $('#submit123').click(function () {
        var postData = {
            'captcha_0': $('#id_captcha_0').val(),
            'captcha_1': $('#id_captcha_1').val()
        };
        $.ajax({
            url: '/authenticator/submit_form',
            type: 'post',
            data: postData,
            success:function (res) {
                if(res.code == 200) {
                    alert("Success")
                } else {
                    alert("Failed")
                }
            },
            error:function () {
                alert("error")
            }
        });
    });
</script>

</body>
</html>